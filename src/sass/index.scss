@use "sass:color";

//@import "variables";
$theme-gradient: linear-gradient(45deg, #A47451 0.000%, #9C9881 16.667%, #73A09D 33.333%, #3B899A 50.000%, #095B79 66.667%, #002847 83.333%, #000116 100.000%);
// PALETTE 1: Benjamin Moore
$theme-bg: #fcede2;
$theme-primary: #73A09D;
$theme-primary-dark: color.scale($theme-primary, $lightness: -20%);
$theme-text: #2c2c2c;
$theme-secondary: #d5e3e6;
$theme-accent: #095B79;
$theme-border-radius: 0px;

//bulma override

$primary-color: $theme-primary; //#050409;
$text: $theme-text;
$dark-color: #00092C; //#050409;//11052C
$dark-contrast-color: #f2f2f2;
$gold-color: #c29b63;
$tag-color: color.scale($theme-bg, $lightness: -35%);
$link: $theme-accent;
$navbar-height: 10rem;

$card-radius: 0px;
$breakpoint-1600: 1600px;


@forward "bulma/sass/utilities" with ( //Bulma css variables override

	$family-primary: '"Open Sans","sans-serif"',
	$link: #242F9B,
);
@use "bulma/sass/utilities/mixins";


//Bulma components
@forward "bulma/sass/base/";
//@forward "bulma/sass/utilities/_index";
@forward "bulma/sass/layout/_index" with ($container-max-width: 1600px);
@forward "bulma/sass/helpers/_index";
@forward "bulma/sass/form/_index";
@forward "bulma/sass/elements/title" with ($title-color: $dark-color,
);
@forward "bulma/sass/elements/content" with ($content-heading-color: $primary-color,
);
@forward "bulma/sass/components/navbar";
@forward "bulma/sass/elements/button";
@forward "bulma/sass/elements/box" with ($box-padding: 1.2rem);
@forward "bulma/sass/elements/tag";
@forward "bulma/sass/elements/image";
@forward "bulma/sass/layout/level";
@forward "bulma/sass/grid/columns";

// Import the themes so that all CSS variables have a value
@forward "bulma/sass/themes";

//custom typography
$fa-font-path: "./webfonts";
@import "@fortawesome/fontawesome-free/scss/fontawesome";
@import "@fortawesome/fontawesome-free/scss/regular";
@import "@fortawesome/fontawesome-free/scss/solid";
@import "@fortawesome/fontawesome-free/scss/brands";

@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap');

//import my assets
@import "tipography";
@import "elements";
@import "base";

//quick fix for some reason needed
.tag {
	line-height: 1.75;
	;
}

html {
	a {
		--bulma-link-text: #{$link};
	}

	.title {
		--bulma-title-color: #{$theme-primary};

	}

	.navbar {
		background-color: $theme-bg;

		.navbar-item {
			background-color: transparent !important;

			&.logo-container {
				padding: 0.5rem 0.75rem;
			}
		}

		--bulma-navbar-height: 5rem;
		--bulma-navbar-background-color: $theme-bg;

		@include mixins.tablet {
			.container {
				border-bottom: 2px solid color.scale($theme-bg, $lightness: -3%);
			}
		}
	}
}

p,
span,
a {
	&.link {
		color: $primary-color;
		font-family: 'Lyon Display Web';
		position: relative;
		font-weight: 700;
		text-decoration: none;

		&:after {
			content: "\27F6";
			position: relative;
			margin-left: 0.5rem;
			font-family: sans-serif;
			//vertical-align: middle;
			font-size: 90%;
		}

		&.left {
			&:after {
				content: none;
			}

			&:before {
				content: "\27F5";
				position: relative;
				margin-right: 0.5rem;
				font-family: sans-serif;
				font-size: 90%;
			}
		}

	}

}

section.section {
	.container.is-fluid {
		@include mixins.mobile {
			padding: 0;
		}

		max-width: 1600px !important;
		padding-left: 0;
		padding-right: 0;
	}

	position: relative;

	&.colored-black {
		background: $dark-color;

		.title,
		p,
		h1,
		h2,
		h3,
		strong {
			color: white;
		}

		a:not(.button) {
			color: #F2F2F2;
			border-color: $dark-contrast-color;
		}
	}

	&.gradient {
		// Remove static background since we'll use a pseudo-element

		// Gradient overlay on top of background image
		&::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background-image: radial-gradient(ellipse at center, rgba(103, 49, 145, 1) 0%, rgba(103, 49, 145, 0.9) 30%, rgba(50, 0, 129, 0.7) 60%, rgba(50, 0, 129, 0) 100%);
			//background: linear-gradient(45deg, rgba(182, 130, 92, 1.000) 0.000%, rgba(115, 64, 148, 1.000) 16.667%, rgba(64, 51, 200, 1.000) 33.333%, rgba(57, 101, 227, 1.000) 50.000%, rgba(97, 179, 222, 1.000) 66.667%, rgba(163, 231, 186, 1.000) 83.333%, rgba(222, 221, 131, 1.000) 100.000%);
			//opacity: 0.8; // Adjust opacity as needed
			//background: linear-gradient(-45deg, rgba(42, 0, 27, 0.9) 0.000%, rgba(120, 19, 12, 0.8) 16.667%, rgba(206, 72, 14, 0.7) 33.333%, rgba(255, 141, 34, 0.5) 50.000%, rgba(255, 213, 67, 0.6) 66.667%, rgba(255, 255, 105, 0.7) 83.333%, rgba(255, 255, 141, 0.8) 100.000%);
			background-size: 100% 100%;
			//animation: gradientShift 15s ease infinite;
			z-index: 1;
			pointer-events: none;
		}

		// Fade to white at the bottom (on top of gradient)
		/*&::after {
			content: '';
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			height: 250px; // Adjust height of fade
			background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, whitesmoke 100%);
			pointer-events: none;
			z-index: 1;
		}*/

		// Ensure content stays above everything
		.container * {
			position: relative;
			z-index: 10 !important;
		}

		@keyframes gradientShift {
			0% {
				background-position: 0% 50%;
			}

			50% {
				background-position: 100% 50%;
			}

			100% {
				background-position: 0% 50%;
			}
		}
	}

	&.with-image {
		background-size: cover;
		background-position: center center;
		z-index: 0;

		>* {
			z-index: 2;
		}

		&.with-layer {

			&:after {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: 1;
				content: "";
				background: $dark-color;
				opacity: 0.4;
			}
		}

		p,
		h1,
		h2 {
			text-shadow: 1px 1px 2px rgba($dark-color, 0.5);
		}
	}

	&#top-section {

		//font-size: 0;
		>.container {
			font-size: 1em;
		}


		@include mixins.desktop {
			//padding-bottom: 0;


		}

		@include mixins.widescreen {
			img {
				//max-width: 280px;
			}
		}
	}

	// Hero background image styling
	.background-img {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 0;
		overflow: hidden;
		background-image: var(--hero-bg-image);
		background-repeat: repeat-x;
		background-size: auto 100%;
		width: 7680px;
		height: 100%;
		//background-position: 0 center;
		animation: slide 60s linear infinite;

		.hero-image {
			display: none;
		}

		@keyframes slide {
			0% {
				transform: translate(0);
			}

			100% {
				transform: translate(-3840px);
				/* The image width */
			}
		}
	}

	// Ensure content stays above background
	.container {
		position: relative;
		z-index: 2;
	}

}

// Gradient Text Animation
.gradient-text {
	background: $theme-gradient;
	//background: linear-gradient(30deg, rgba(106, 195, 203, 1.000) 0.000%, rgba(84, 169, 207, 1.000) 11.111%, rgba(62, 143, 214, 1.000) 22.222%, rgba(45, 117, 223, 1.000) 33.333%, rgba(38, 92, 233, 1.000) 44.444%, rgba(43, 68, 245, 1.000) 55.556%, rgba(59, 47, 255, 1.000) 66.667%, rgba(80, 27, 255, 1.000) 77.778%, rgba(103, 11, 255, 1.000) 88.889%, rgba(121, 0, 255, 1.000) 100.000%);
	//background: linear-gradient(45deg, rgba(7, 174, 234, 1.000) 0.000%, rgba(43, 245, 152, 1.000) 100.000%);
	//background: linear-gradient(-45deg, rgba(42, 0, 27, 1.000) 0.000%, rgba(120, 19, 12, 1.000) 16.667%, rgba(206, 72, 14, 1.000) 33.333%, rgba(255, 141, 34, 1.000) 50.000%, rgba(255, 213, 67, 1.000) 66.667%, rgba(255, 255, 105, 1.000) 83.333%, rgba(255, 255, 141, 1.000) 100.000%);
	background-size: 100% 100%;
	background-clip: text;
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;


	@keyframes gradientTextShift {
		0% {
			background-position: 0% 50%;
		}

		50% {
			background-position: 100% 50%;
		}

		100% {
			background-position: 0% 50%;
		}
	}

	&.animated {
		background-size: 500% 100%;
		animation: gradientTextShift 3s ease infinite;
	}
}


button.button,
a.button,
.button a,
p.button {
	&.is-ghost {
		padding: 0;
	}

	border-radius: 0;

	&.is-gold {
		color: $dark-contrast-color;
		background: $gold-color;
		border-width: 0px;

		&.is-outlined {
			border-width: 1px;
			border-color: $gold-color;
			background: transparent;
			color: $gold-color;

			&:hover,
			&:focus {
				background: $gold-color;
				color: $dark-contrast-color
			}
		}
	}

	span.wp-font-awesome-icon {
		color: inherit;
	}
}

.button a {
	color: inherit;
	text-decoration: none;
	border: none;
	font-weight: inherit;

}

// Projects Masonry Layout
// NOTE: No project item should ever be 100% width on tablet/desktop to avoid unfillable gaps
// Mobile-first approach: start with mobile (100% width) and progressively enhance
.projects-masonry {
	width: 100%;

	.project-sizer,
	.project-item {
		width: 100%; // Mobile first - 1 column
		padding: 1rem;
		box-sizing: border-box;
		width: 33.3%;
		height: 400px;


		.project-link {
			display: block;
			text-decoration: none;

			&:hover {
				.card {
					transform: translateY(-5px);
					box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
				}
			}
		}

		a {
			height: 100%;
			display: block;
		}

		.card.project {
			height: 100%; // Let content determine height
			//min-height: 250px; // Base minimum height
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			border-radius: $card-radius;
			overflow: hidden;
			position: relative;
			transition: transform 0.3s ease, box-shadow 0.3s ease;

			// Variable heights for masonry effect
			&.card-small {
				min-height: 200px;
				max-height: 250px;
			}

			&.card-medium {
				min-height: 300px;
				max-height: 350px;
			}

			&.card-large {
				min-height: 400px;
				max-height: 450px;
			}

			&.card-tall {
				min-height: 500px;
				max-height: 600px;
			}

			&::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: linear-gradient(to bottom,
						rgba(0, 0, 0, 0.1) 0%,
						rgba(0, 0, 0, 0.7) 100%);
				z-index: 1;
			}

			.card-content {
				position: absolute;
				bottom: 0;
				left: 0;
				right: 0;
				padding: 1.5rem;
				z-index: 2;

				.project-title {
					color: white;
					margin-bottom: 0.5rem;
					font-weight: bold;
				}

				.link {
					color: rgba(255, 255, 255, 0.8);
				}
			}
		}

		// Horizontal projects get taller cards
		&.horizontal .card.project {
			height: 400px;
		}
	}
}

// Isotope transitions
.projects-masonry .project-item {
	transition: transform 0.4s ease, opacity 0.4s ease;
}

.projects-masonry .project-item.isotope-hidden {
	opacity: 0;
	transform: scale(0.001);
}

// Simple CSS Grid Masonry
// 12-Column CSS Grid Masonry System with Mobile-First Responsive Design
.projects-grid-masonry {
	display: grid;
	gap: 1rem;

	// Mobile First: 1 column by default
	grid-template-columns: 1fr;

	// Tablet: 2 columns (also applies to Desktop)
	@include mixins.tablet {
		grid-template-columns: repeat(2, 1fr);
	}

	// Widescreen: 12 columns
	@include mixins.widescreen {
		grid-template-columns: repeat(12, 1fr);
	}

	.project-item {
		position: relative;
		overflow: hidden;
		//cursor: pointer;

		// Apply desaturation filter on tablet and up (not on mobile)
		@include mixins.tablet {
			//filter: saturate(0.2) brightness(0.8) contrast(1.1);
			filter: grayscale(0.6);
			transition: filter 0.4s ease;
		}

		&.js-positioned {
			position: absolute;
		}

		&.large-item {
			img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}
		}

		img {
			width: 100%;
			height: auto;
			display: block;
		}

		// Overlay that appears on hover
		.project-overlay {
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			z-index: 10;

			.overlay-content {
				background: $theme-gradient;
				background-size: 100% 100%; // Normal size by default
				width: auto;
				padding: 0.75rem 2rem;
				transform: translateX(-1.5rem);
				transition: transform 0.3s ease, background-size 0.3s ease;
				display: inline-block;
				border-top-right-radius: 50px;
				border: 0px;
				position: relative; // Required for pseudo-element

				display: flex;
				flex-direction: column;
				align-items: flex-start;
				width: fit-content;
				padding-left: 2rem;

				// Add noise texture over the gradient
				&::before {
					content: '';
					position: absolute;
					top: 0;
					left: 0;
					right: 0;
					bottom: 0;
					background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E");
					opacity: 0.3; // Very subtle noise
					mix-blend-mode: overlay;
					pointer-events: none;
					border-top-right-radius: 50px; // Match parent border radius
					z-index: 1;
				}

				// Remove the dark overlay - filter will handle the dimming effect

				h3,
				p {
					color: $theme-bg;
					position: relative; // Ensure text stays above overlays
					z-index: 3;
				}

				h3 {
					font-size: 1rem;
				}

				p {
					font-size: .75rem;
					font-weight: 400;
				}

				[class^=devicon-] {
					position: relative;
					top: 4px;
					margin-left: 0.25rem;
					font-size: 150%;
				}
			}
		}

		// Show entire overlay content on hover with infinite gradient animation + remove filter
		&:hover {

			// Remove desaturation filter on hover for dramatic color reveal
			@include mixins.tablet {
				//filter: saturate(1) brightness(1) contrast(1);
				filter: none;
			}

			.project-overlay .overlay-content {
				transform: translateX(0);
				background-size: 200% 100%; // Only expand horizontally, keep height normal
				animation: gradientShift 6s ease infinite;

				// Slightly increase noise visibility on hover for more texture
				&::before {
					opacity: 0.5;
				}
			}
		}

		// Gradient animation keyframes
		@keyframes gradientShift {
			0% {
				background-position: 0% 50%;
			}

			50% {
				background-position: 100% 50%;
			}

			100% {
				background-position: 0% 50%;
			}
		}

		// Only add video styles and transitions if item has video
		&.has-video {
			img {
				transition: opacity 0.3s ease;
			}

			.project-video {
				position: absolute;
				top: 0;
				left: 0;
				width: 101%;
				height: 101%;
				object-fit: cover;
				opacity: 0;
				transition: opacity 0.3s ease;
				pointer-events: none;
			}

			&:hover {
				.project-video {
					opacity: 1;
				}

				img {
					opacity: 0;
				}
			}
		}

		// For projects that should show video by default
		&.only-video {
			img {
				opacity: 0;
			}

			.project-video {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				object-fit: cover;
				opacity: 1;
				pointer-events: none;
			}
		}
	}

	// Native masonry for supporting browsers
	@supports (grid-template-rows: masonry) {
		grid-template-rows: masonry;

		// Mobile, Tablet, Desktop: All items span 1 column (ignore grid-span classes)
		.grid-span-1,
		.grid-span-2,
		.grid-span-3,
		.grid-span-4,
		.grid-span-5,
		.grid-span-6,
		.grid-span-7,
		.grid-span-8,
		.grid-span-9,
		.grid-span-10,
		.grid-span-11,
		.grid-span-12 {
			grid-column: span 1;
		}

		// Widescreen: ALL grid span classes become active + responsive adjustments
		@include mixins.widescreen {

			// Force first two items to be exactly 50% width each (6 columns each)
			.project-item:nth-child(1),
			.project-item:nth-child(2) {
				grid-column: span 6 !important; // Exactly 50% width each
			}

			.grid-span-1 {
				grid-column: span 1;
			}

			// 8.33% width
			.grid-span-2 {
				grid-column: span 2;
			}

			// 16.67% width  
			.grid-span-3 {
				grid-column: span 3;
			}

			// 25% width
			.grid-span-4 {
				grid-column: span 4;
			}

			// 33.33% width
			.grid-span-5 {
				grid-column: span 5;
			}

			// 41.67% width
			.grid-span-6 {
				grid-column: span 6;
			}

			// 50% width
			.grid-span-7 {
				grid-column: span 7;
			}

			// 58.33% width
			.grid-span-8 {
				grid-column: span 8;
			}

			// 66.67% width
			.grid-span-9 {
				grid-column: span 9;
			}

			// 75% width
			.grid-span-10 {
				grid-column: span 10;
			}

			// 83.33% width
			.grid-span-11 {
				grid-column: span 11;
			}

			// 91.67% width
			.grid-span-12 {
				grid-column: span 12;
			}

			// 100% width
		}
	}

	//title and text sizes
	@include mixins.widescreen {

		// Force sizing for first two items (exactly 50% width each)
		.project-item:nth-child(1),
		.project-item:nth-child(2) {
			.project-overlay {
				.overlay-content {
					h3 {
						font-size: 2rem;
					}

					p {
						font-size: 1rem;
					}
				}
			}
		}

		.grid-span-1,
		.grid-span-2 {
			.project-overlay {
				.overlay-content {
					h3 {
						font-size: 0.9rem;
					}

					p {
						font-size: 0.7rem;
					}
				}
			}
		}

		.grid-span-3 {
			.project-overlay {
				.overlay-content {
					h3 {
						font-size: 1.1rem;
					}

					p {
						font-size: 0.8rem;
					}
				}
			}
		}

		.grid-span-4 {
			.project-overlay {
				.overlay-content {
					h3 {
						font-size: 1.3rem;
					}

					p {
						font-size: 0.85rem;
					}
				}
			}
		}

		.grid-span-5,
		.grid-span-6 {
			.project-overlay {
				.overlay-content {
					h3 {
						font-size: 1.6rem;
					}

					p {
						font-size: 0.9rem;
					}
				}
			}
		}

		.grid-span-7,
		.grid-span-8 {
			.project-overlay {
				.overlay-content {
					h3 {
						font-size: 1.8rem;
					}

					p {
						font-size: 1rem;
					}
				}
			}
		}

		.grid-span-9,
		.grid-span-10,
		.grid-span-11,
		.grid-span-12 {
			.project-overlay {
				.overlay-content {
					h3 {
						font-size: 2.2rem;
					}

					p {
						font-size: 1.1rem;
					}
				}
			}
		}
	}

	// Fallback for non-masonry browsers
	@supports not (grid-template-rows: masonry) {
		&.js-masonry {
			position: relative;
		}

	}


}

// Circular Logo Animation
.circular-logo {
	position: relative;
	width: 100px;
	height: 100px;
	display: flex;
	align-items: center;
	justify-content: center;

	.center-text {
		position: absolute;
		z-index: 10;
		font-size: 3.5rem;
		margin: 0;
		pointer-events: none;
		font-weight: 600;
		line-height: 1;
		margin-top: -5px;
	}

	.circular-text {
		position: absolute;
		width: 100%;
		height: 100%;
		font-size: 0.75rem;
		font-weight: 300;
		letter-spacing: 0.1em;
		color: $theme-primary;
		animation: rotate 20s linear infinite;
		font-family: 'Canela', sans-serif;
		line-height: 1;
	}
}

@keyframes rotate {
	from {
		transform: rotate(0deg);
	}

	to {
		transform: rotate(360deg);
	}
}